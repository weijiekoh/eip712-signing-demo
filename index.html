<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>EIP712 demo</title>
  </head>
  <body>
    <p>
      This page demonstrates how to sign EIP712 typed data using MetaMask and
      verify it in Solidity. Feel free to learn from it and adapt it for your
      dApp and smart contracts.
    </p>
    <p>
      You need a version of MetaMask that supports eth_signTypedData_v2 to use
      this demo.  Prebuilt extensions can be downloaded from metamaskbot <a
          href="https://github.com/MetaMask/metamask-extension/pull/4803"
          target="_blank">here</a>.
    </p>

    <button id="signBtn">Click here to sign some typed data</button>
    <br />
    <p>
      Next, copy and paste this 
      into <a target="_blank" href="https://remix.ethereum.org/#optimize=true&version=soljson-v0.4.24+commit.e67f0147.js">Remix</a>, deploy 
      it in the Javascript VM environment, and run the verify function.
    </p>
    <br />
    <textarea readonly rows=10 cols=80 id="response">
    </textarea>

    <br />

    <p>
      The signature generated by MetaMask, as well as your wallet address, has
      been inserted into the Solidity code above. The code hashes the data you
      just signed, runs ecrecover with yoour signature, and compares it with
      your wallet address.
    </p>
    <p>
        If Remix displays <pre>0: bool: true</pre> that's great! Your wallet
        address was successfully authenticated against the signature.
    </p>

    <br />

    <p>An example:</p>
    <img src="./remix.png" />

    <script src="./solidityCode.js" language="javascript"></script>
    <script src="./sign.js" language="javascript"></script>
  </body>
</html>
